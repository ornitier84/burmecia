---
- name: 'web01.contoso.com'
  box: 'ubuntu/xenial64'
  desktop: False
  interfaces:
    - ip: 192.168.122.10
      auto_config: true
      method: 'private_network'
      adapter: 3
  port_forwards:
    - guest: 80
      host: 8080
  vmem: 1024
  provision: true
  vcpu: 1
  disks:
    - size: 20
      controller: "SATA Controller"
  synced_folders:
    - C:\Users\<%= ENV['USER'] || ENV['USERNAME'] %>\git: '/usr/share/git'
    - C:\Users\<%= ENV['USER'] || ENV['USERNAME'] %>\Documents\workspace: '/home/vagrant/Documents/workspace'
  provider_options:
    virtualbox:
      modifyvm:
        natdnshostresolver1: 'on'
        memory: 2048
      setextradata:
        VBoxInternal2/SharedFoldersEnableSymlinksCreate/v-root: 1  
  provisioners:
    - local: |
        cmd /c "echo this is a local command on the vagrant controller"
    - shell: |
        echo "This is a shell command on the vm/managed server"
    - ansible:
        inventory: "<%= $vagrant.basedir.windows if $platform.is_windows else $vagrant.basedir.posix %>/environments/contoso/inventory.yaml"
        gather_facts: true
        become: True
        roles:
          - role: common/bootstrap
            become: True
            become_user: root          
        tasks:
          
          - name: Install apache2
            apt: 
              name: apache2 
              update_cache: yes 
              state: latest            
